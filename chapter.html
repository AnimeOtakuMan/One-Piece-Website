<!DOCTYPE html>

<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" type="image/jpg" href="favicon.jpg">
    <title>One Piece Chapter</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <meta name="description" content="Read Latest One Piece chapter latest" />
    <meta name="robots" content="index, follow" />

    <meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:description" content="&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;" />
<meta property="og:site_name" content="One Piece Manga Online" />
<meta property="article:tag" content="Akainu" />
<meta property="article:tag" content="Arcs" />
<meta property="article:tag" content="Boa Hancock" />
<meta property="article:tag" content="Books" />
<meta property="article:tag" content="Brook" />
<meta property="article:tag" content="Charlotte Linlin" />
<meta property="article:tag" content="color" />
<meta property="article:tag" content="Crocodile" />
<meta property="article:tag" content="Digitally Colored" />
<meta property="article:tag" content="Donquixote Doflamingo" />
<meta property="article:tag" content="Edward Newgate" />
<meta property="article:tag" content="Ending" />
<meta property="article:tag" content="episode list" />
<meta property="article:tag" content="Franky" />
<meta property="article:tag" content="Gol D. Roger" />
<meta property="article:tag" content="Kaido" />
<meta property="article:tag" content="Kizaru" />
<meta property="article:tag" content="luffy" />
<meta property="article:tag" content="Manga" />
<meta property="article:tag" content="Monkey D" />
<meta property="article:tag" content="Monkey D. Dragon" />
<meta property="article:tag" content="Monkey D. Luffy" />
<meta property="article:tag" content="monkeyD" />
<meta property="article:tag" content="Nami" />
<meta property="article:tag" content="Nico" />
<meta property="article:tag" content="Nico Robin" />
<meta property="article:tag" content="One" />
<meta property="article:tag" content="one peace" />
<meta property="article:tag" content="One Piece" />
<meta property="article:tag" content="one piece anime" />
<meta property="article:tag" content="one piece books" />
<meta property="article:tag" content="one piece characters" />
<meta property="article:tag" content="one piece color" />
<meta property="article:tag" content="one piece colored" />
<meta property="article:tag" content="one piece Digitally Colored" />
<meta property="article:tag" content="one piece luffy" />
<meta property="article:tag" content="one piece main characters" />
<meta property="article:tag" content="one piece stampede" />
<meta property="article:tag" content="one piece wiki" />
<meta property="article:tag" content="Original" />
<meta property="article:tag" content="Perona" />
<meta property="article:tag" content="Piece" />
<meta property="article:tag" content="Portgas D. Ace" />
<meta property="article:tag" content="read one piece" />
<meta property="article:tag" content="Roronoa" />
<meta property="article:tag" content="Roronoa Zoro" />
<meta property="article:tag" content="Sabo" />
<meta property="article:tag" content="sanji" />
<meta property="article:tag" content="Shanks" />
<meta property="article:tag" content="Tony Tony" />
<meta property="article:tag" content="Tony Tony Chopper" />
<meta property="article:tag" content="Trafalgar" />
<meta property="article:tag" content="Trafalgar D. Water Law" />
<meta property="article:tag" content="Usopp" />
<meta property="article:tag" content="Vinsmoke Sanji" />
<meta property="article:tag" content="zoro" />
<meta property="og:image" content="https://lifeofluffy.com/favicon.jpg" />
<meta property="og:image:secure_url" content="https://lifeofluffy.com/favicon.jpg" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:description" content="&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;" />
<meta name="twitter:image" content="https://lifeofluffy.com/favicon.jpg" />

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RTV0J12CLR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-RTV0J12CLR');
    </script>
    <script data-ad-client="ca-pub-5483591282248570" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
</head>

<body>

    <style>
        body {
            background-color: black;
        }

        iframe {
            position: absolute;
            top: 0;
            left: 10%;
        }

        #pageList {
            position: relative;
            padding-top: 260px;
            padding-bottom: 250px;
        }

        #title {
            color: white;
            text-align: center;
        }

        .leftButton {
            position: relative;
            right: 20%;
        }

        .rightButton {
            position: relative;
            left: 20%;
        }

        #footer {
            text-align: center;
            position: relative;
            bottom: 0%;
        }
    </style>

<nav class="navbar navbar-light customNavbar">
    <a class="navbar-brand" style="color: white; font-weight: bolder;" href="https://lifeofluffy.com/">
        <img src="favicon.jpg" width="50" height="50" alt="">
        One Piece Manga
    </a>
</nav>

    <div id="title"></div>
    <div class="container" id="pageList"></div>

    <div id="footer"></div>

    <script>
        let requestURL = 'https://raw.githubusercontent.com/AnimeOtakuMan/One-Piece-Chapters-Json/master/chapter_json.json';

        let request = new XMLHttpRequest();
        request.open('GET', requestURL);

        request.responseType = 'json';
        request.send();

        request.onload = function () {
            var chapterNumber = getQueryVariable("chapter");
            chapterNumber = chapterNumber.replaceAll("%20", " ");
            document.title = chapterNumber;

            var headingElement = document.createElement("h2");
            headingElement.innerHTML = chapterNumber;
            var titleDiv = document.getElementById("title");
            titleDiv.appendChild(headingElement);

            const chapters = request.response;
            var currentChapter = null;
            var latestChapter = true;
            //Find out if current chapter is latest chapter
            for (let chapter of chapters) {
                if (chapter['chapter_number'] == chapterNumber) {
                    currentChapter = chapter;
                    break;
                }
                else {
                    latestChapter = false;
                }
            }

            let nextChapterNumber = "chapter.html?chapter=";
            let prevChapterNumber = "chapter.html?chapter=";
            //Find out next chapter URL and prev chapter URL
            for (var i = 0; i < chapters.length; i++) {
                if (chapters[i]['chapter_number'] == chapterNumber) {
                    currentChapter = chapters[i];
                    if (i != 0) {
                        nextChapterNumber += chapters[i - 1]['chapter_number'];
                    }
                    if (i != chapters.length - 1) {
                        prevChapterNumber += chapters[i + 1]['chapter_number'];
                    }
                    break;
                }
                else {
                    latestChapter = false;
                }
            }

            var metaArticle = document.createElement("meta");
            metaArticle.setAttribute("property", "article:tag");
            metaArticle.setAttribute("content", "Chapter " + chapterNumber);
            document.getElementsByTagName('head')[0].appendChild(metaArticle);


            var metaArticle2 = document.createElement("meta");
            metaArticle2.setAttribute("name", "twitter:title");
            metaArticle2.setAttribute("content", "One Piece, Chapter " + chapterNumber + " - One Piece Manga Online");
            document.getElementsByTagName('head')[0].appendChild(metaArticle2);


            var metaArticle3 = document.createElement("meta");
            metaArticle3.setAttribute("property", "og:url");
            metaArticle3.setAttribute("content", "https://online-one-piece.com/manga/one-piece-chapter-" + chapterNumber);
            document.getElementsByTagName('head')[0].appendChild(metaArticle3);

            var metaArticle4 = document.createElement("meta");
            metaArticle4.setAttribute("property", "og:title");
            metaArticle4.setAttribute("content", "One Piece Chapter " + chapterNumber);
            document.getElementsByTagName('head')[0].appendChild(metaArticle4);

            var prevChapterButton = document.createElement("a");
            prevChapterButton.setAttribute("class", "leftButton");
            var nextChapterButton = document.createElement("a");
            nextChapterButton.setAttribute("class", "rightButton");

            prevChapterButton.setAttribute("href", prevChapterNumber);
            nextChapterButton.setAttribute("href", nextChapterNumber);

            prevChapterButton.innerHTML = "Previous Chapter"
            nextChapterButton.innerHTML = "Next Chapter"

            var footerDiv = document.getElementById("footer");
            titleDiv.appendChild(prevChapterButton);
            footerDiv.appendChild(prevChapterButton.cloneNode(true));
            if (!latestChapter) {
                titleDiv.appendChild(nextChapterButton);
                footerDiv.appendChild(nextChapterButton.cloneNode(true));
            }

            const imageURLs = currentChapter['image_urls'];
            var pageList = document.getElementById("pageList");
            imageURLs.forEach(element => {
                var pageImage = document.createElement("img");
                var pageDiv = document.createElement("div");
                pageDiv.setAttribute("class", "d-flex justify-content-center");

                pageImage.setAttribute("src", element);
                pageImage.setAttribute("class", "img-fluid");
                pageImage.setAttribute("alt", "One Piece Chapter " + chapterNumber);

                pageDiv.appendChild(pageImage);
                pageList.appendChild(pageDiv);
            });
        };


        function getQueryVariable(variable) {
            var query = window.location.search.substring(1);
            var vars = query.split("&");
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split("=");
                if (pair[0] == variable) { return pair[1]; }
            }
            return (false);
        }
    </script>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>
    <script>
        (function (__htas) {
            var d = document,
                s = d.createElement('script'),
                l = d.scripts[d.scripts.length - 1];
            s.settings = __htas || {};
            s.src = "\/\/apprefaculty.pro\/aBWbZ.yOQY2\/9fklZ\/Tx9V6\/bI2F5dlKS\/WUQv9UNvDuEw2CNKT\/Y_4cNziN0c0\/MGTpYS1RN\/jYgd3qJ-ndBD1\/ck2shcalby2i5dlhSWWAQl9\/NHDuEY2hNETxYP4XNNiT0\/0wMcT\/Yw1\/NcjQgR3L";
            l.parentNode.insertBefore(s, l);
        })({})
    </script>
</body>

</html>