<!DOCTYPE html>

<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" type="image/jpg" href="favicon.jpg">
    <title>One Piece Chapter</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script>var clicky_site_ids = clicky_site_ids || []; clicky_site_ids.push(101300413);</script>
    <script async src="//static.getclicky.com/js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-RTV0J12CLR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-RTV0J12CLR');
    </script>
</head>

<body>

    <style>
        body {
            background-color: black;
        }

        iframe {
            position: absolute;
            top: 0;
            left: 10%;
        }

        #pageList {
            position: relative;
            top: 250px;
        }
    </style>

    <div class="container" id="pageList">
    </div>

    <script>
        let requestURL = 'https://raw.githubusercontent.com/AnimeOtakuMan/One-Piece-Chapters-Json/master/chapter_json.json';

        let request = new XMLHttpRequest();
        request.open('GET', requestURL);

        request.responseType = 'json';
        request.send();

        request.onload = function () {
            var chapterNumber = getQueryVariable("chapter");
            chapterNumber = chapterNumber.replaceAll("%20", " ");
            document.title = "One Piece Chapter " + chapterNumber;
            const chapters = request.response;
            var currentChapter = null;
            chapters.forEach(element => {
                if (element['chapter_number'] == chapterNumber) {
                    currentChapter = element;
                }
            });
            const imageURLs = currentChapter['image_urls'];
            var pageList = document.getElementById("pageList");
            imageURLs.forEach(element => {
                var pageImage = document.createElement("img");
                var pageDiv = document.createElement("div");
                pageDiv.setAttribute("class", "d-flex justify-content-center");

                pageImage.setAttribute("src", element);
                pageImage.setAttribute("class", "img-fluid");

                pageDiv.appendChild(pageImage);
                pageList.appendChild(pageDiv);
            });
        };


        function getQueryVariable(variable) {
            var query = window.location.search.substring(1);
            var vars = query.split("&");
            for (var i = 0; i < vars.length; i++) {
                var pair = vars[i].split("=");
                if (pair[0] == variable) { return pair[1]; }
            }
            return (false);
        }
    </script>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>
    <script>
        (function (__htas) {
            var d = document,
                s = d.createElement('script'),
                l = d.scripts[d.scripts.length - 1];
            s.settings = __htas || {};
            s.src = "\/\/apprefaculty.pro\/aBWbZ.yOQY2\/9fklZ\/Tx9V6\/bI2F5dlKS\/WUQv9UNvDuEw2CNKT\/Y_4cNziN0c0\/MGTpYS1RN\/jYgd3qJ-ndBD1\/ck2shcalby2i5dlhSWWAQl9\/NHDuEY2hNETxYP4XNNiT0\/0wMcT\/Yw1\/NcjQgR3L";
            l.parentNode.insertBefore(s, l);
        })({})
    </script>
</body>

</html>